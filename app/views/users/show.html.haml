.main
  %p#notice= notice

  .profile
    .profile_img
      - if @user.user_image.file && @user.user_image.file.exists?
        = image_tag(@user.user_image.profile.url)
      - else
        = image_tag("default-avatar.png")
      = link_to 'Change image', edit_user_path(@user), class: 'hidden', id: 'edit_img'
    .profile_details
      %h2= @user.name
      %p= @user.description

  #tabs.profile
    %ul
      %li
        %a{:href => "#tabs-1"} Patterns
      %li
        %a{:href => "#tabs-2"} Likes
    #tabs-1
      #container
        - if current_user == @user
          = render 'private_profile'
        - else
          = render 'public_profile'
    #tabs-2
      #container
        - @user_likes.each do |pattern|
          .pattern_card
            .pattern_preview
              - pattern.rows[0..8].each do |row|
                .pattern_row{ id: row.id }
                  - row.stitches[0..11].each do |stitch|
                    .stitch{ :style => "background-color: #{stitch.color}", :data => { id: stitch.id} }
            .pattern_description_index
              %p= link_to pattern.name, pattern
              = link_to like_index_pattern_path(pattern), method: :put do
                %i.fa.fa-heart
              - if pattern.likes.size > 0
                = pattern.likes.size
              %p= link_to(image_tag(pattern.user.user_image.thumb.url), user_path(pattern.user_id))
              %p= pattern.user.try(:name)
              %p= pattern.difficulty.try(:name)
              %p= pattern.category.try(:name)
